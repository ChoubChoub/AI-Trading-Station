# Redis Brain Performance Gate Thresholds
# Intelligence-grade latency gates for Brain workloads (ML inference, signal generation)
# All values in microseconds (μs) - Optimized for Brain vs Execution Edge

# Core Redis Operations (P99 thresholds) - BRAIN OPTIMIZED
SET_P99_MAX=1000      # 1ms - Brain feature caching tolerance
XADD_P99_MAX=1000     # 1ms - Brain stream operations tolerance
RTT_P99_MAX=10000     # 10ms - Brain intelligence workload tolerance (vs 250μs HFT)

# Jitter Thresholds (P99-P50 spread) - BRAIN OPTIMIZED
SET_JITTER_MAX=500    # 0.5ms - Brain feature operations tolerance (vs 4μs HFT)
XADD_JITTER_MAX=500   # 0.5ms - Brain stream operations tolerance (vs 5μs HFT)
RTT_JITTER_MAX=5000   # 5ms - Brain intelligence communication tolerance (vs 200μs HFT)

# Stream Operations (if enabled) - BRAIN OPTIMIZED
STREAM_LAG_P99_MAX=1000   # 1ms - Brain stream processing tolerance (vs 25μs HFT)
STREAM_JITTER_MAX=500     # 0.5ms - Brain stream consistency tolerance (vs 10μs HFT)

# Health Thresholds - BRAIN OPTIMIZED
MAX_CLIENTS=50            # Brain supports more connections for ML agents
MIN_OPS_PER_SEC=500       # Lower threshold for Brain workloads (vs 1000 HFT)
MAX_MEMORY_MB=1000        # Higher memory allowance for Brain features (vs 100MB HFT)

# Gate Behavior
SOFT_FAIL_ALLOW=false    # true = allow degraded mode, false = hard fail
BOOTSTRAP_MODE=false     # true = create baseline, false = enforce baseline
BASELINE_FILE="Services/Monitoring/Config/fingerprint-baseline.json"

# Network Ultra-Low Latency Gate
NETWORK_GATE_ENABLED=true      # Enable network ULL checks
NETWORK_GATE_CRITICAL=true     # true = hard fail on network issues, false = warnings only
ULL_TRADING_INTERFACE="enp130s0f0"
ULL_ADAPTIVE_RX_EXPECTED="off"
ULL_XPS_EXPECTED_MASK="0c"
ULL_REQUIRED_SERVICES="ultra-low-latency-nic.service configure-nic-irq-affinity.service"

# Reporting
METRICS_OUTPUT="/opt/redis-hft/metrics/redis-metrics.json"
GATE_LOG="/home/youssefbahloul/ai-trading-station/Services/Monitoring/logs/redis-hft-gate.log"